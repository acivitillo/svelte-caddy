# specify the domain you want to use for your local development
localhost {
    # use the certificate made with mkcert
	tls /root/certs/myapp.me.pem /root/certs/myapp.me-key.pem

    # forward requests from which the path starts with /v1 to whatever is listening on api:5001
	reverse_proxy /v1/* http://api:5001

	# forward all other requests to webui:5000
	reverse_proxy http://webui:5000

}

localhost:81 {
    root * /var/www
    encode gzip
    file_server
}

localhost:8008 {
    # forward request from localhost:8008 to fastapi container exposed on port 8000
    reverse_proxy fastapi:8000
}